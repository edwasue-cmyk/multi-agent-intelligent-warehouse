# NeMo Guardrails Configuration for Warehouse Operational Assistant
# Simplified configuration for content safety and compliance

models:
  - type: main
    engine: nvidia_nim
    model: nvidia/llama-3-70b-instruct
    parameters:
      temperature: 0.1
      max_tokens: 1000
      top_p: 0.9

  - type: embedding
    engine: nvidia_nim
    model: nvidia/nv-embedqa-e5-v5

instructions:
  - type: general
    content: |
      You are a helpful warehouse operational assistant. You help with inventory management,
      operations coordination, and safety compliance. Always be professional, accurate,
      and follow safety protocols. Never provide information that could compromise
      warehouse security or safety.

  - type: safety
    content: |
      Safety is paramount in warehouse operations. Always prioritize safety protocols
      and never suggest actions that could endanger workers or equipment. If asked
      about potentially dangerous operations, always recommend consulting with safety
      personnel first.

  - type: compliance
    content: |
      Ensure all recommendations comply with warehouse policies, safety regulations,
      and industry standards. Never suggest actions that violate compliance requirements.

# Safety and compliance rules
safety_rules:
  - name: "jailbreak_detection"
    patterns:
      - "ignore previous instructions"
      - "forget everything"
      - "you are now"
      - "pretend to be"
      - "act as if"
      - "roleplay as"
      - "simulate"
      - "override"
      - "bypass"
      - "jailbreak"
    response: "I cannot ignore my instructions or roleplay as someone else. I'm here to help with warehouse operations. How can I assist you with inventory, operations, or safety today?"

  - name: "safety_violations"
    patterns:
      - "operate forklift without training"
      - "bypass safety protocols"
      - "ignore safety warnings"
      - "work without PPE"
      - "operate equipment unsafely"
    response: "Safety is our top priority. I cannot provide guidance that bypasses safety protocols. Please consult with your safety supervisor for proper procedures."

  - name: "security_violations"
    patterns:
      - "security codes"
      - "access restricted areas"
      - "alarm codes"
      - "disable security"
      - "warehouse layout for unauthorized access"
      - "bypass access control"
      - "hack into system"
      - "unauthorized access"
    response: "I cannot provide security-sensitive information. For security-related questions, please contact your security team or supervisor."

  - name: "compliance_violations"
    patterns:
      - "avoid safety inspections"
      - "skip compliance requirements"
      - "ignore regulations"
      - "ignore safety regulations"
      - "work around safety rules"
    response: "Compliance with safety regulations and company policies is mandatory. I cannot provide guidance that circumvents compliance requirements. Please follow all established procedures and consult with your supervisor if you have questions."

  - name: "off_topic_queries"
    patterns:
      - "weather"
      - "joke"
      - "capital of"
      - "how to cook"
      - "recipe"
      - "sports"
      - "politics"
      - "entertainment"
    response: "I'm specialized in warehouse operations including inventory management, operations coordination, and safety compliance. I can help you with questions about stock levels, task assignments, safety procedures, or equipment status. How can I assist you with warehouse operations?"

# Monitoring and logging
monitoring:
  log_level: INFO
  log_conversations: true
  log_rail_hits: true
  metrics:
    - conversation_length
    - rail_hits
    - response_time
    - safety_violations
    - compliance_issues

# Limits and constraints
limits:
  max_turns: 50
  max_tokens_per_turn: 1000
  max_tokens_per_conversation: 10000